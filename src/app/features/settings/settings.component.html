<div class="settings-container">
  <div class="page-header">
    <h1>Settings</h1>
    <span class="version-badge">v1.0</span>
  </div>

  <mat-card class="settings-card">
    <mat-tab-group 
      (selectedIndexChange)="onTabChange($event)" 
      [selectedIndex]="selectedTab" 
      animationDuration="300ms" 
      mat-stretch-tabs="false" 
      mat-align-tabs="start"
      class="settings-tabs">
      
      <!-- General Settings Tab -->
      <mat-tab>
        <ng-template matTabLabel>
          <div class="tab-label" aria-label="General settings tab">
            <mat-icon>tune</mat-icon>
            <span>General</span>
          </div>
        </ng-template>
        <app-general-settings></app-general-settings>
      </mat-tab>
      
      <!-- Security Tab -->
      <mat-tab>
        <ng-template matTabLabel>
          <div class="tab-label" aria-label="Security settings tab">
            <mat-icon>security</mat-icon>
            <span>Security</span>
          </div>
        </ng-template>
        <app-security-settings></app-security-settings>
      </mat-tab>
      
      <!-- Notifications Tab -->
      <mat-tab>
        <ng-template matTabLabel>
          <div class="tab-label" aria-label="Notification settings tab">
            <mat-icon>notifications</mat-icon>
            <span>Notifications</span>
          </div>
        </ng-template>
        <app-notification-settings></app-notification-settings>
      </mat-tab>
      
    </mat-tab-group>
  </mat-card>
  
  <!-- Global Save Button (Fixed) -->
  <div class="global-save-container" *ngIf="hasPendingChanges">
    <div class="global-save-content">
      <div class="save-message">
        <mat-icon color="warn">info</mat-icon>
        <span>You have unsaved changes</span>
      </div>
      <button 
        mat-raised-button 
        color="primary" 
        [disabled]="savingInProgress"
        (click)="saveAllSettings()">
        <mat-icon *ngIf="!savingInProgress">save</mat-icon>
        <mat-spinner *ngIf="savingInProgress" diameter="20" color="accent"></mat-spinner>
        <span>{{ savingInProgress ? 'Saving...' : 'Save All Changes' }}</span>
      </button>
    </div>
  </div>
</div>
